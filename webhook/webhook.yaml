apiVersion: webhookconfig.keptn.sh/v1alpha1
kind: WebhookConfig
metadata:
  name: webhook-configuration
spec:
  webhooks:
    - type: sh.keptn.event.notify.triggered
      requests:
        - curl --request POST --data
          '{"event":"{{.type}}","stage":"{{.data.stage}}","openticket":{"incidentNumber":"{{.data.openticket.incidentNumber}}","incidentUrl":"{{.data.openticket.incidentUrl}}"},"evaluation":{"result":"{{.data.result}}
          ({{.data.evaluation.score}} /
          100)"},"incident":{"ProblemID":"{{.data.incident.ProblemID}}","ProblemTitle":"{{.data.incident.ProblemTitle}}","ProblemURL":"{{.data.incident.ProblemURL}}","State":"{{.data.incident.State}}","Tags":"{{.data.incident.Tags}}"}}'
          https://webhook.site/2be34b4b-8a90-47cd-ba9f-a3e237e90765
      subscriptionID: 082734b4-7621-4491-b142-45be85b7547b
    - type: sh.keptn.event.openticket.finished
      requests:
        - curl --request POST --data
          '{"type":"{{.type}}","project":"{{.data.project}}","service":"{{.data.service}}","stage":"{{.data.stage}}","shkeptncontext":"{{.shkeptncontext}}","id":"{{.id}}","openticket":{"incidentNumber":"{{.data.openticket.incidentNumber}}","incidentUrl":"{{.data.openticket.incidentUrl}}"}}'
          https://webhook.site/2be34b4b-8a90-47cd-ba9f-a3e237e90765
      subscriptionID: edaef679-8324-453b-84e7-c60dd7f6711a
    - type: sh.keptn.event.openticket.triggered
      requests:
        - "curl --header 'Content-Type: application/json' --request POST --data
          '{\"data\":{\"project\":\"{{.data.project}}\",\"service\":\"{{.data.s\
          ervice}}\",\"stage\":\"{{.data.stage}}\"},\"shkeptncontext\":\"{{.shk\
          eptncontext}}\",\"id\":\"{{.id}}\",\"type\":\"{{.type}}\",\"incident\
          \":{\"ProblemID\":\"{{.data.incident.ProblemID}}\",\"ProblemTitle\":\
          \"{{.data.incident.ProblemTitle}}\",\"ProblemURL\":\".data.incident.P\
          roblemURL\",\"State\":\"{{.data.incident.State}}\",\"Tags\":\"{{.data\
          .incident.Tags}}\"}}' http://34.215.238.225:8080/api/openticket"
      subscriptionID: c0d0f7b9-251d-4438-8122-443d6b1b34d9
    - type: sh.keptn.event.openticket.started
      requests:
        - "curl --header 'Content-type: application/json' --request POST --data
          '{\"data\":{\"project\":\"{{.data.project}}\",\"service\":\"{{.data.s\
          ervice}}\",\"stage\":\"{{.data.stage}}\"},\"shkeptncontext\":\"{{.shk\
          eptncontext}}\",\"id\":\"{{.id}}\",\"type\":\"{{.type}}\",\"incident\
          \":{\"ProblemID\":\"{{.data.incident.ProblemID}}\",\"ProblemTitle\":\
          \"{{.data.incident.ProblemTitle}}\",\"ProblemURL\":\".data.incident.P\
          roblemURL\",\"State\":\"{{.data.incident.State}}\",\"Tags\":\"{{.data\
          .incident.Tags}}\"}}' http://34.215.238.225:8080/api/openticket"
      subscriptionID: c7eed10d-dd3e-40f0-a64c-a431516bf69b
